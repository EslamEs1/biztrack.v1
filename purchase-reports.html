<!DOCTYPE html>
<html lang="ar" dir="rtl">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>تقارير المشتريات</title>
        <link href="css/bootstrap.min.css" rel="stylesheet" />
        <link href="css/bootstrap-icons.min.css" rel="stylesheet" />
        <link href="css/sweetalert.css" rel="stylesheet" />
        <link href="css/style.css" rel="stylesheet" />
        <!-- إضافة خط Cairo -->
        <link
            href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap"
            rel="stylesheet"
        />
        <style>
            body {
                font-family: "Cairo", sans-serif;
            }
        </style>
    </head>

    <body>
        <div class="wrapper">
            <!-- Sidebar -->
            <nav id="sidebar">
                <div class="sidebar-header">
                    <a class="text-align-center" href="#">
                        <a href="index.html">
                            <img
                                src="img/logo/logo.png"
                                alt="Logo"
                                height="35"
                            />
                        </a>
                    </a>
                </div>

                <ul class="list-unstyled components">
                    <!-- المبيعات -->
                    <li>
                        <a href="#salesSubmenu" data-bs-toggle="collapse">
                            <i class="bi bi-cart"></i> المبيعات
                        </a>
                        <ul class="collapse list-unstyled" id="salesSubmenu">
                            <li>
                                <a href="create-invoice.html"
                                    ><i class="bi bi-file-text"></i> فاتورة
                                    مبيعات</a
                                >
                            </li>
                            <li>
                                <a href="invoices-list.html"
                                    ><i class="bi bi-gear"></i> إدارة
                                    الفواتير</a
                                >
                            </li>
                            <li>
                                <a href="customer-payments.html"
                                    ><i class="bi bi-cash"></i> مدفوعات
                                    العملاء</a
                                >
                            </li>
                        </ul>
                    </li>

                    <!-- العملاء -->
                    <li>
                        <a href="#customersSubmenu" data-bs-toggle="collapse">
                            <i class="bi bi-people"></i> العملاء
                        </a>
                        <ul
                            class="collapse list-unstyled"
                            id="customersSubmenu"
                        >
                            <li>
                                <a href="customers.html"
                                    ><i class="bi bi-person-lines-fill"></i>
                                    إدارة العملاء</a
                                >
                            </li>
                            <li>
                                <a href="crm.html"
                                    ><i class="bi bi-chat-dots"></i> إدارة
                                    علاقات العملاء</a
                                >
                            </li>
                            <li>
                                <a href="customer-followup.html"
                                    ><i class="bi bi-calendar-check"></i> متابعة
                                    العملاء</a
                                >
                            </li>
                            <li>
                                <a href="customer-reports.html"
                                    ><i class="bi bi-bar-chart"></i> تقارير
                                    العملاء</a
                                >
                            </li>
                            <li>
                                <a href="customer-notifications.html"
                                    ><i class="bi bi-bell"></i> إشعارات
                                    العملاء</a
                                >
                            </li>
                        </ul>
                    </li>

                    <!-- المشتريات -->
                    <li>
                        <a href="#purchasesSubmenu" data-bs-toggle="collapse">
                            <i class="bi bi-bag"></i> المشتريات
                        </a>
                        <ul
                            class="collapse list-unstyled"
                            id="purchasesSubmenu"
                        >
                            <li>
                                <a href="suppliers.html"
                                    ><i class="bi bi-people"></i> إدارة
                                    الموردين</a
                                >
                            </li>
                            <li>
                                <a href="purchase-orders.html"
                                    ><i class="bi bi-cart-plus"></i> طلبات
                                    الشراء</a
                                >
                            </li>
                            <li>
                                <a href="purchase-invoices.html"
                                    ><i class="bi bi-receipt"></i> فواتير
                                    الشراء</a
                                >
                            </li>
                            <li>
                                <a href="supplier-payments.html"
                                    ><i class="bi bi-cash"></i> مدفوعات
                                    الموردين</a
                                >
                            </li>
                            <li>
                                <a href="purchase-reports.html"
                                    ><i class="bi bi-bar-chart"></i> تقارير
                                    المشتريات</a
                                >
                            </li>
                        </ul>
                    </li>

                    <!-- المخازن -->
                    <li>
                        <a href="#inventorySubmenu" data-bs-toggle="collapse">
                            <i class="bi bi-box-seam"></i> المخازن
                        </a>
                        <ul
                            class="collapse list-unstyled"
                            id="inventorySubmenu"
                        >
                            <li>
                                <a href="products.html"
                                    ><i class="bi bi-box"></i> المنتجات</a
                                >
                            </li>
                            <li>
                                <a href="inventory-check.html"
                                    ><i class="bi bi-list-check"></i> إدارة
                                    الجرد</a
                                >
                            </li>
                            <li>
                                <a href="inventory-movement.html"
                                    ><i class="bi bi-arrow-left-right"></i> حركة
                                    المخزون</a
                                >
                            </li>
                            <li>
                                <a href="warehouses.html"
                                    ><i class="bi bi-house"></i> إدارة
                                    المستودعات</a
                                >
                            </li>
                            <li>
                                <a href="track-products.html"
                                    ><i class="bi bi-search"></i> تتبع
                                    المنتجات</a
                                >
                            </li>
                            <li>
                                <a href="inventory-settings.html"
                                    ><i class="bi bi-gear"></i> إعدادات
                                    المخازن</a
                                >
                            </li>
                            <li>
                                <a href="inventory-reports.html"
                                    ><i class="bi bi-bar-chart"></i> تقارير
                                    المخازن</a
                                >
                            </li>
                            <li>
                                <a href="inventory-notifications.html"
                                    ><i class="bi bi-bell"></i> إشعارات
                                    المخزون</a
                                >
                            </li>
                            <li>
                                <a href="transfer-products.html"
                                    ><i class="bi bi-arrow-left-right"></i> نقل
                                    المنتجات</a
                                >
                            </li>
                            <li>
                                <a href="shelves-management.html"
                                    ><i class="bi bi-boxes"></i> إدارة الأرفف</a
                                >
                            </li>
                            <li>
                                <a href="barcode-management.html"
                                    ><i class="bi bi-upc-scan"></i> إدارة
                                    الباركود</a
                                >
                            </li>
                            <li>
                                <a href="bundled-products.html"
                                    ><i class="bi bi-boxes"></i> المنتجات
                                    المجمعة</a
                                >
                            </li>
                        </ul>
                    </li>

                    <!-- الخزينة -->
                    <li>
                        <a href="#treasurySubmenu" data-bs-toggle="collapse">
                            <i class="bi bi-cash-stack"></i> الخزينة
                        </a>
                        <ul class="collapse list-unstyled" id="treasurySubmenu">
                            <li>
                                <a href="revenues.html"
                                    ><i class="bi bi-arrow-down"></i>
                                    الإيرادات</a
                                >
                            </li>
                            <li>
                                <a href="create-revenue.html"
                                    ><i class="bi bi-plus"></i> إضافة إيراد</a
                                >
                            </li>
                            <li>
                                <a href="edit-revenue.html"
                                    ><i class="bi bi-pencil"></i> تعديل إيراد</a
                                >
                            </li>
                            <li>
                                <a href="view-revenue.html"
                                    ><i class="bi bi-eye"></i> معاينة إيراد</a
                                >
                            </li>
                            <li>
                                <a href="expenses.html"
                                    ><i class="bi bi-arrow-up"></i> المصروفات</a
                                >
                            </li>
                            <li>
                                <a href="create-expense.html"
                                    ><i class="bi bi-plus"></i> إضافة مصروف</a
                                >
                            </li>
                            <li>
                                <a href="edit-expense.html"
                                    ><i class="bi bi-pencil"></i> تعديل مصروف</a
                                >
                            </li>
                            <li>
                                <a href="view-expense.html"
                                    ><i class="bi bi-eye"></i> معاينة مصروف</a
                                >
                            </li>
                            <li>
                                <a href="current-balance.html"
                                    ><i class="bi bi-wallet"></i> الرصيد
                                    الحالي</a
                                >
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>

            <!-- Page Content -->
            <div id="content">
                <!-- Navbar -->
                <nav class="navbar navbar-expand-lg">
                    <div class="container-fluid">
                        <!-- Right Side: Menu Button -->
                        <div class="d-flex align-items-center">
                            <button
                                id="sidebarCollapse"
                                class="btn btn-link text-dark d-lg-none me-2"
                            >
                                <i class="bi bi-list fs-4"></i>
                            </button>
                        </div>

                        <!-- Center: Page Title -->
                        <div class="d-none d-md-block mx-auto">
                            <h4 class="mb-0">تقارير المشتريات</h4>
                        </div>

                        <!-- Left Side: Notifications and Profile -->
                        <div class="d-flex align-items-center gap-3">
                            <!-- Notifications Dropdown -->
                            <div class="dropdown">
                                <button
                                    class="btn btn-link text-dark position-relative"
                                    type="button"
                                    id="notificationsDropdown"
                                    data-bs-toggle="dropdown"
                                    aria-expanded="false"
                                >
                                    <i class="bi bi-bell fs-5"></i>
                                    <span
                                        class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                                    >
                                        3
                                        <span class="visually-hidden"
                                            >unread notifications</span
                                        >
                                    </span>
                                </button>
                                <ul
                                    class="dropdown-menu dropdown-menu-end notification-dropdown"
                                    aria-labelledby="notificationsDropdown"
                                >
                                    <li>
                                        <h6 class="dropdown-header">
                                            التنبيهات
                                        </h6>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="#">
                                            <i
                                                class="bi bi-info-circle text-primary"
                                            ></i>
                                            <div class="ms-2">
                                                <p class="mb-0">
                                                    تم إنشاء تقرير جديد
                                                </p>
                                                <small class="text-muted"
                                                    >منذ 5 دقائق</small
                                                >
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <hr class="dropdown-divider" />
                                    </li>
                                    <li>
                                        <a
                                            class="dropdown-item text-center"
                                            href="#"
                                            >عرض كل التنبيهات</a
                                        >
                                    </li>
                                </ul>
                            </div>

                            <!-- Profile Dropdown -->
                            <div class="dropdown">
                                <button
                                    class="btn btn-link p-0"
                                    type="button"
                                    id="profileDropdown"
                                    data-bs-toggle="dropdown"
                                    aria-expanded="false"
                                >
                                    <div class="d-flex align-items-center">
                                        <img
                                            src="img/person/icons8-person-32.png"
                                            class="rounded-circle"
                                            alt="Profile"
                                        />
                                        <span
                                            class="d-none d-md-inline-block ms-2 text-dark"
                                            >أحمد محمد</span
                                        >
                                    </div>
                                </button>
                                <ul
                                    class="dropdown-menu dropdown-menu-end profile-dropdown"
                                    aria-labelledby="profileDropdown"
                                >
                                    <li>
                                        <a class="dropdown-item" href="#"
                                            ><i class="bi bi-person me-2"></i
                                            >الملف الشخصي</a
                                        >
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="#"
                                            ><i class="bi bi-gear me-2"></i
                                            >الإعدادات</a
                                        >
                                    </li>
                                    <li>
                                        <hr class="dropdown-divider" />
                                    </li>
                                    <li>
                                        <a
                                            class="dropdown-item text-danger"
                                            href="#"
                                            ><i
                                                class="bi bi-box-arrow-right me-2"
                                            ></i
                                            >تسجيل الخروج</a
                                        >
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </nav>

                <!-- Purchase Reports -->
                <div class="container-fluid dashboard-content">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">تقارير المشتريات</h5>

                            <!-- Filters -->
                            <div class="row mb-4">
                                <div class="col-md-3">
                                    <label for="reportType" class="form-label"
                                        >نوع التقرير</label
                                    >
                                    <select class="form-select" id="reportType">
                                        <option value="totalPurchases">
                                            إجمالي المشتريات
                                        </option>
                                        <option value="topSuppliers">
                                            أكثر الموردين تعاملًا
                                        </option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label for="startDate" class="form-label"
                                        >من تاريخ</label
                                    >
                                    <input
                                        type="date"
                                        class="form-control"
                                        id="startDate"
                                    />
                                </div>
                                <div class="col-md-3">
                                    <label for="endDate" class="form-label"
                                        >إلى تاريخ</label
                                    >
                                    <input
                                        type="date"
                                        class="form-control"
                                        id="endDate"
                                    />
                                </div>
                                <div class="col-md-3 d-flex align-items-end">
                                    <button
                                        class="btn btn-primary w-100"
                                        id="generateReportButton"
                                    >
                                        <i class="bi bi-bar-chart"></i> إنشاء
                                        التقرير
                                    </button>
                                </div>
                            </div>

                            <!-- Report Results -->
                            <div id="reportResults">
                                <!-- Total Purchases Report -->
                                <div
                                    id="totalPurchasesReport"
                                    class="report-section"
                                    style="display: none"
                                >
                                    <h5>إجمالي المشتريات</h5>
                                    <p>
                                        <strong>الإجمالي الكلي:</strong> 25000
                                        جنيه
                                    </p>
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>رقم الفاتورة</th>
                                                <th>اسم المورد</th>
                                                <th>التاريخ</th>
                                                <th>الإجمالي</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>PI-001</td>
                                                <td>شركة المصرية للتجارة</td>
                                                <td>2023-10-01</td>
                                                <td>15000 جنيه</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>PI-002</td>
                                                <td>شركة التقدم للتوريدات</td>
                                                <td>2023-10-02</td>
                                                <td>8000 جنيه</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>PI-003</td>
                                                <td>شركة النور للاستيراد</td>
                                                <td>2023-10-03</td>
                                                <td>2000 جنيه</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Top Suppliers Report -->
                                <div
                                    id="topSuppliersReport"
                                    class="report-section"
                                    style="display: none"
                                >
                                    <h5>أكثر الموردين تعاملًا</h5>
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>#</th>
                                                <th>اسم المورد</th>
                                                <th>عدد الفواتير</th>
                                                <th>إجمالي المشتريات</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>1</td>
                                                <td>شركة المصرية للتجارة</td>
                                                <td>5</td>
                                                <td>50000 جنيه</td>
                                            </tr>
                                            <tr>
                                                <td>2</td>
                                                <td>شركة التقدم للتوريدات</td>
                                                <td>3</td>
                                                <td>20000 جنيه</td>
                                            </tr>
                                            <tr>
                                                <td>3</td>
                                                <td>شركة النور للاستيراد</td>
                                                <td>2</td>
                                                <td>8000 جنيه</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="js/bootstrap.min.js"></script>
        <script src="js/sweetalert.js"></script>
        <script src="js/main.js"></script>
        <script>
            // JavaScript لإنشاء التقارير
            document
                .getElementById("generateReportButton")
                .addEventListener("click", function () {
                    const reportType =
                        document.getElementById("reportType").value;
                    const startDate =
                        document.getElementById("startDate").value;
                    const endDate = document.getElementById("endDate").value;

                    // إخفاء كل التقارير أولاً
                    document
                        .querySelectorAll(".report-section")
                        .forEach((section) => {
                            section.style.display = "none";
                        });

                    // عرض التقرير بناءً على النوع المختار
                    if (reportType === "totalPurchases") {
                        document.getElementById(
                            "totalPurchasesReport"
                        ).style.display = "block";
                    } else if (reportType === "topSuppliers") {
                        document.getElementById(
                            "topSuppliersReport"
                        ).style.display = "block";
                    }

                    // تنبيه بنجاح إنشاء التقرير
                    Swal.fire({
                        title: "إنشاء التقرير",
                        text: "تم إنشاء التقرير بنجاح!",
                        icon: "success",
                        confirmButtonText: "موافق",
                    });
                });
        </script>
    </body>
</html>

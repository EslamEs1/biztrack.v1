<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>معاينة الفاتورة قبل الحفظ</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-icons.min.css" rel="stylesheet">
    <link href="css/sweetalert.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <div class="wrapper">
        <!-- Sidebar -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <a class="text-align-center" href="#">
                    <img src="img/logo/logo.png" alt="Logo" height="35">
                </a>
            </div>

            <ul class="list-unstyled components">
                <!-- المبيعات -->
                <li>
                    <a href="#salesSubmenu" data-bs-toggle="collapse">
                        <i class="bi bi-cart"></i> المبيعات
                    </a>
                    <ul class="collapse list-unstyled" id="salesSubmenu">
                        <li><a href="create-invoice.html"><i class="bi bi-file-text"></i> فاتورة مبيعات</a></li>
                        <li><a href="invoices-list.html"><i class="bi bi-gear"></i> إدارة الفواتير</a></li>
                        <li><a href="#"><i class="bi bi-cash"></i> مدفوعات العملاء</a></li>
                    </ul>
                </li>

                <!-- المشتريات -->
                <li>
                    <a href="#purchasesSubmenu" data-bs-toggle="collapse">
                        <i class="bi bi-bag"></i> المشتريات
                    </a>
                    <ul class="collapse list-unstyled" id="purchasesSubmenu">
                        <li><a href="#"><i class="bi bi-cart-plus"></i> طلبات الشراء</a></li>
                        <li><a href="#"><i class="bi bi-receipt"></i> فواتير الشراء</a></li>
                        <li><a href="#"><i class="bi bi-people"></i> إدارة الموردين</a></li>
                    </ul>
                </li>

                <!-- المخازن -->
                <li>
                    <a href="#inventorySubmenu" data-bs-toggle="collapse">
                        <i class="bi bi-box-seam"></i> المخازن
                    </a>
                    <ul class="collapse list-unstyled" id="inventorySubmenu">
                        <li><a href="#"><i class="bi bi-box"></i> المنتجات</a></li>
                        <li><a href="#"><i class="bi bi-list-check"></i> إدارة الجرد</a></li>
                        <li><a href="#"><i class="bi bi-arrow-left-right"></i> حركة المخزون</a></li>
                    </ul>
                </li>

                <!-- الخزينة -->
                <li>
                    <a href="#treasurySubmenu" data-bs-toggle="collapse">
                        <i class="bi bi-cash-stack"></i> الخزينة
                    </a>
                    <ul class="collapse list-unstyled" id="treasurySubmenu">
                        <li><a href="#"><i class="bi bi-arrow-down"></i> الإيرادات</a></li>
                        <li><a href="#"><i class="bi bi-arrow-up"></i> المصروفات</a></li>
                        <li><a href="#"><i class="bi bi-wallet"></i> الرصيد الحالي</a></li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- Page Content -->
        <div id="content">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg">
                <div class="container-fluid">
                    <!-- Right Side: Menu Button and Logo -->
                    <div class="d-flex align-items-center">
                        <button id="sidebarCollapse" class="btn btn-link text-dark d-lg-none me-2">
                            <i class="bi bi-list fs-4"></i>
                        </button>
                        <button id="sidebarCollapseDesktop" class="btn btn-link text-dark d-none d-lg-block me-2">
                            <i class="bi bi-list fs-4"></i>
                        </button>
                    </div>

                    <!-- Center: Search Bar -->
                    <div class="d-none d-md-block mx-auto" style="width: 40%;">
                        <div class="input-group">
                            <input type="text" class="form-control search-input" placeholder="البحث..."
                                aria-label="Search">
                            <button class="btn btn-outline-secondary" type="button">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Left Side: Notifications and Profile -->
                    <div class="d-flex align-items-center gap-3">
                        <!-- Notifications Dropdown -->
                        <div class="dropdown">
                            <button class="btn btn-link text-dark position-relative" type="button"
                                id="notificationsDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="bi bi-bell fs-5"></i>
                                <span
                                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                                    3
                                    <span class="visually-hidden">unread notifications</span>
                                </span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end notification-dropdown"
                                aria-labelledby="notificationsDropdown">
                                <li>
                                    <h6 class="dropdown-header">التنبيهات</h6>
                                </li>
                                <li><a class="dropdown-item" href="#">
                                        <i class="bi bi-info-circle text-primary"></i>
                                        <div class="ms-2">
                                            <p class="mb-0">تم تحديث المخزون</p>
                                            <small class="text-muted">منذ 5 دقائق</small>
                                        </div>
                                    </a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item text-center" href="#">عرض كل التنبيهات</a></li>
                            </ul>
                        </div>

                        <!-- Profile Dropdown -->
                        <div class="dropdown">
                            <button class="btn btn-link p-0" type="button" id="profileDropdown"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                <div class="d-flex align-items-center">
                                    <img src="img/person/icons8-person-32.png" class="rounded-circle" alt="Profile">
                                    <span class="d-none d-md-inline-block ms-2 text-dark">أحمد محمد</span>
                                </div>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end profile-dropdown" aria-labelledby="profileDropdown">
                                <li><a class="dropdown-item" href="#"><i class="bi bi-person me-2"></i>الملف الشخصي</a>
                                </li>
                                <li><a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>الإعدادات</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item text-danger" href="#"><i
                                            class="bi bi-box-arrow-right me-2"></i>تسجيل الخروج</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Actions Bar -->
            <div class="actions-bar bg-light p-3 mb-4">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <button class="btn btn-primary" id="saveInvoice">
                            <i class="bi bi-save"></i> حفظ الفاتورة
                        </button>
                        <a href="create-invoice.html" class="btn btn-secondary" id="editInvoice">
                            <i class="bi bi-pencil"></i> تعديل الفاتورة
                        </a>
                        <button class="btn btn-success" id="sendInvoice">
                            <i class="bi bi-envelope"></i> إرسال الفاتورة
                        </button>
                        <button class="btn btn-info" id="printInvoice">
                            <i class="bi bi-printer"></i> طباعة الفاتورة
                        </button>
                        <button class="btn btn-warning" id="downloadInvoice">
                            <i class="bi bi-file-earmark-pdf"></i> تحميل PDF
                        </button>
                    </div>
                    <div>
                        <select class="form-select" id="invoiceStatus">
                            <option value="draft">مسودة</option>
                            <option value="unpaid">غير مدفوعة</option>
                            <option value="partially_paid">مدفوعة جزئيًا</option>
                            <option value="paid">مدفوعة بالكامل</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Invoice Content -->
            <div class="container-fluid dashboard-content">
                <!-- Invoice Details -->
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card invoice-details">
                            <div class="card-body">
                                <h5 class="card-title">تفاصيل الفاتورة</h5>
                                <div class="detail-item">
                                    <div class="detail-label">رقم الفاتورة</div>
                                    <div class="detail-value">INV-001</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">تاريخ الفاتورة</div>
                                    <div class="detail-value">2023-10-01</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">العميل</div>
                                    <div class="detail-value">أحمد محمد</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">العملة</div>
                                    <div class="detail-value">ريال سعودي (SAR)</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">حالة الفاتورة</div>
                                    <div class="detail-value" id="invoiceStatusText">مسودة</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">ملاحظات</div>
                                    <div class="detail-value">لا توجد ملاحظات.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card invoice-details">
                            <div class="card-body">
                                <h5 class="card-title">بيانات الشحن</h5>
                                <div class="detail-item">
                                    <div class="detail-label">عنوان الشحن</div>
                                    <div class="detail-value">الرياض، السعودية</div>
                                </div>
                                <div class="detail-item">
                                    <div class="detail-label">تاريخ الشحن</div>
                                    <div class="detail-value">2023-10-05</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Invoice Items Table -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">بنود الفاتورة</h5>
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>المنتج</th>
                                            <th>الوصف</th>
                                            <th>الكمية</th>
                                            <th>السعر</th>
                                            <th>الإجمالي</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>منتج 1</td>
                                            <td>وصف المنتج 1</td>
                                            <td>2</td>
                                            <td>500 ر.س</td>
                                            <td>1000 ر.س</td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>منتج 2</td>
                                            <td>وصف المنتج 2</td>
                                            <td>1</td>
                                            <td>300 ر.س</td>
                                            <td>300 ر.س</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Totals -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">الإجماليات</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>الإجمالي قبل الخصم والضريبة: <strong>1300 ر.س</strong></p>
                                        <p>الخصم: <strong>0 ر.س</strong></p>
                                        <p>الضريبة: <strong>150 ر.س</strong></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>الإجمالي النهائي: <strong>1450 ر.س</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/bootstrap.min.js"></script>
    <script src="js/sweetalert.js"></script>
    <script src="js/main.js"></script>
    <script>
        // JavaScript لإدارة الإجراءات باستخدام SweetAlert2
        document.getElementById('saveInvoice').addEventListener('click', function () {
            Swal.fire({
                title: 'حفظ الفاتورة',
                text: 'تم حفظ الفاتورة بنجاح!',
                icon: 'success',
                confirmButtonText: 'موافق'
            });
        });

        document.getElementById('editInvoice').addEventListener('click', function () {
            Swal.fire({
                title: 'تعديل الفاتورة',
                text: 'سيتم تحويلك إلى صفحة تعديل الفاتورة.',
                icon: 'info',
                confirmButtonText: 'موافق'
            });
        });

        document.getElementById('sendInvoice').addEventListener('click', function () {
            Swal.fire({
                title: 'إرسال الفاتورة',
                text: 'تم إرسال الفاتورة إلى العميل.',
                icon: 'success',
                confirmButtonText: 'موافق'
            });
        });

        document.getElementById('printInvoice').addEventListener('click', function () {
            Swal.fire({
                title: 'طباعة الفاتورة',
                text: 'جارٍ تحضير الفاتورة للطباعة...',
                icon: 'info',
                confirmButtonText: 'موافق'
            }).then(() => {
                window.print();
            });
        });

        document.getElementById('downloadInvoice').addEventListener('click', function () {
            Swal.fire({
                title: 'تحميل PDF',
                text: 'تم تحميل الفاتورة كملف PDF.',
                icon: 'success',
                confirmButtonText: 'موافق'
            });
        });

        // تغيير حالة الفاتورة
        const invoiceStatus = document.getElementById('invoiceStatus');
        const invoiceStatusText = document.getElementById('invoiceStatusText');

        invoiceStatus.addEventListener('change', function () {
            const status = invoiceStatus.value;
            let statusText = '';

            switch (status) {
                case 'draft':
                    statusText = 'مسودة';
                    break;
                case 'unpaid':
                    statusText = 'غير مدفوعة';
                    break;
                case 'partially_paid':
                    statusText = 'مدفوعة جزئيًا';
                    break;
                case 'paid':
                    statusText = 'مدفوعة بالكامل';
                    break;
            }

            invoiceStatusText.textContent = statusText;
        });
    </script>
</body>

</html>